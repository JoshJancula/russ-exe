<!DOCTYPE html>
<html>

<head>
    <!--Materialize CDN-->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-alpha.2/css/materialize.min.css">

    <!--jQuery library-->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<base href="./">

<style>
    .canvasContainer1 {
        background-position: center;
        background-size: contain;
        background-repeat: no-repeat;
        background-image: url('./assets/adult.png');
    }


    .canvasContainer2 {
        background-position: center;
        background-size: contain;
        background-repeat: no-repeat;
        background-image: url('./assets/baby.png');
    }

    .burnRadio {
        /* border: solid black 1px; */
        padding: 4px;
    }

    td,
    th {
        border-left: 1px solid rgba(0, 0, 0, 0.12);
        border-right: 1px solid rgba(0, 0, 0, 0.12);
    }

    th {
        border-top: 1px solid rgba(0, 0, 0, 0.12);
        text-align: center;
    }

    td input {
        margin: 2%;
        border-bottom: none !important;
    }

    .insertMoreButton {
        margin-top: 5%;
    }

    body {
        padding: 2%;
    }

    #burnTypes,
    #skinTypes,
    #fill3 {
        display: none;
    }
</style>

<script type="text/javascript">

    var patientAge = 0;
    var tooltype = 'draw';
    var canvasFillColor = "#000306";
    var formType = 'burn';

    function setCanvasFill(color) {
        canvasFillColor = color;
    }

    function useTool(tool) {
        tooltype = tool; //update
    }

    function setFormType(type) {
        var burn = document.getElementById('burnTypes');
        var skin = document.getElementById('skinTypes');
        var lowerBurn = document.getElementById('lowerBurn');
        var burnAnnotations = document.getElementById('burnAnnotations');
        var skinAnnotations = document.getElementById('skinAnnotations');
        var fill1 = document.getElementById('fill1');
        var fill3 = document.getElementById('fill3');

        if (type === 'burn') {
            formType = 'burn';
            burn.style.display = 'inline';
            lowerBurn.style.display = 'inline';
            skin.style.display = 'none';
            burnAnnotations.style.display = 'inline';
            skinAnnotations.style.display = 'none';
            fill1.click();
        } else {
            formType = 'skinDisease';
            burn.style.display = 'none';
            lowerBurn.style.display = 'none';
            skin.style.display = 'inline';
            burnAnnotations.style.display = 'none';
            skinAnnotations.style.display = 'inline';
            fill3.click();
        }
    }

</script>

<body>

    <div class="row">
        <!-- Estimated Percentage -->
        <div class="col l6 m6 s12">
            <!-- top row -->
            <div class="row">
                <div class="col l5 m6 s12" style="padding:0">
                    <span>
                        <h6>Date Of Admission: </h6>
                    </span><input type="date" />
                </div>
                <div class="col l3 m2 s6">
                    <span>
                        <h6>Age: </h6>
                    </span><input min="0" value="0" oninput="renderTableCells()" id="patientAge" type="number" />
                </div>
                <div class="col l3 m4 s6 center" style="padding:0">
                    <span>
                        <h6>Sex: </h6>
                    </span>
                    <label style="margin: 2%"><input id="maleBox" type="checkbox"
                            onclick="setSex('m')" /><span>M</span></label>
                    <label style="margin: 2%"><input id="femaleBox" type="checkbox"
                            onclick="setSex('f')" /><span>F</span></label>
                </div>
            </div>
            <div class="row">
                <div class="col l6 m12 s12" style="margin:0; padding: 0">
                    <h6>Date of Injury: <input type="date" /></h6>
                </div>
                <div class="col l6 m12 s12" style="margin:0; padding:0">
                    <h6>Time of Injury: <input type="time" /> </h6>
                </div>
            </div>
            <div class="row">
                <h6>Date Completed: <input type="date" /></h6>
            </div>
            <div class="row center">
                <!-- <p>Type of Burn Injury</p> -->
                <div class="row">
                    <h6>Form Type?</h6>
                </div>
                <div class="row">
                    <label class="td_wtt"><input type="radio" id="burnRadio" name="formType"
                            onclick="setFormType('burn');" /><span>Burn</span></label>
                    <label class="td_wtt"><input type="radio" id="skinRadio" name="formType"
                            onclick="setFormType('skinDisease');" /><span>Skin Disease</span></label>
                </div>
                <hr />
                <div id="burnTypes">
                    <h6>Type of Burn Injury</h6>
                    <!-- <table>
                        <tr style="border-top: 1px solid rgba(0, 0, 0, 0.12);">
                            <td>
                                <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                                    <span>Thermal</span></label>
                            </td>
                            <td>
                                <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                                    <span>Chemical</span></label>
                            </td>
                            <td>
                                <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                                    <span>Electrical</span></label>
                            </td>
                        </tr>

                        <tr>
                            <td>
                                <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                                    <span>Scald</span></label>
                            </td>
                            <td>
                                <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                                    <span>Friction</span></label>
                            </td>
                        </tr>
                    </table> -->
                    <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                        <span>Thermal</span></label>

                    <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                        <span>Chemical</span></label>

                    <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                        <span>Electrical</span></label>

                    <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                        <span>Scald</span></label>

                    <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                        <span>Friction</span></label>

                </div>
                <div id="skinTypes">
                    <h6>Type of Skin Disease</h6>
                    <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                        <span>TENS/SJS</span></label>
                    <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                        <span>SSSS</span></label>

                    <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                        <span>Purpura Fulminans </span></label>

                    <label class="td_wtt burnRadio"><input type="radio" name="burnType" />
                        <span>Bullous Pemphigold </span></label>
                </div>
                <hr />

            </div>
            <div id="lowerBurn" class="center">
                <div classs="row center">
                    <label class="td_wtt"><input type="radio" name="belowBurn" />
                        <span>Initial Burn Estimation Chart</span></label><br>
                    <label class="td_wtt"><input type="radio" name="belowBurn" />
                        <span>Amended Burn Estimation Chart</span></label><br>
                    <label class="td_wtt"><input type="radio" name="belowBurn" />
                        <span>Discharge Burn Estimation Chart</span></label>
                </div>
            </div>
        </div>

            <div class="col l6 m6 s12">
            <!-- canvas in here -->
            <div class="row" style="margin-left:7%;">
                <div id="canvasDiv"></div>
            </div>

            <div class="row center">
                <div class="col l6 m12 s12 center">
                    <div class="row">Select Fill</div>
                    <div class="row">
                        <div id="burnAnnotations">
                            <label class="td_wtt"><input type="radio" id="fill1" name="canvasFill"
                                    onclick="setCanvasFill('#000306');" />
                                <span style="color:black;">Full Thickness</span><span
                                    style="display: inline-block; height: 12px; width: 12px; background: black; margin-left: 8px;"></span></label>
                            <label class="td_wtt"><input type="radio" id="fill2" name="canvasFill"
                                    onclick="setCanvasFill('#ff0033');" />
                                <span style="color: #ff0033;">Partial Thickness</span><span
                                    style="display: inline-block; height: 12px; width: 12px; background: #ff0033; margin-left: 8px;"></span></label>
                        </div>
                        <div id="skinAnnotations">
                            <label class="td_wtt"><input type="radio" id="fill3" name="canvasFill"
                                    onclick="setCanvasFill('#0080FF');" />
                                <span style="color: #0080FF;">Skin Disease</span><span
                                    style="display: inline-block; height: 12px; width: 12px; background: #0080FF; margin-left: 8px;"></span></label>
                        </div>
                    </div>
                </div>
                <div class="col l6 m12 s12">
                    <div class="row">Select Tool</div>
                    <div class="row">
                        <label class="td_wtt"><input type="radio" id="tool1" name="canvasTool"
                                onclick="useTool('draw');" /><span>Draw</span></label>
                        <label class="td_wtt"><input type="radio" name="canvasTool"
                                onclick="useTool('erase');" /><span>Erase</span></label>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="row">
        <div class="row center">
            <h6>Lund and Browder Chart - Burn Estimate - Age vs. Area</h6>
        </div>
        <table>
            <tr>
                <th>Area</th>
                <th class="infant">0-1 yr</th>
                <th class="oneToFour">1-4 yr</th>
                <th class="fiveToNine">5-9 yr</th>
                <th class="tenToFourteen">10-14 yr</th>
                <th class="fifteen">15 yr</th>
                <th class="adult">Adult</th>
                <th>2nd Degree</th>
                <th>3rd Degree</th>
                <th>4th Degree</th>
                <th>TRSA %</th>
            </tr>
            <tr>
                <td>Head</td>
                <td class="infant">19%</td>
                <td class="oneToFour">17%</td>
                <td class="fiveToNine">13%</td>
                <td class="tenToFourteen">11%</td>
                <td class="fifteen">9%</td>
                <td class="adult">7%</td>
                <td> <input type="number" oninput="calculateTotals()" id="headSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="headThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="headFourthDegree" /></td>
                <td><input type="number" readonly id="headTotal" /></td>
            </tr>
            <tr>
                <td>Neck</td>
                <td class="infant">2%</td>
                <td class="oneToFour">2%</td>
                <td class="fiveToNine">2%</td>
                <td class="tenToFourteen">2%</td>
                <td class="fifteen">2%</td>
                <td class="adult">2%</td>
                <td> <input type="number" oninput="calculateTotals()" id="neckSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="neckThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="neckFourthDegree" /></td>
                <td><input type="number" readonly id="neckTotal" /></td>
            </tr>
            <tr>
                <td>Anterior Trunk</td>
                <td class="infant">13%</td>
                <td class="oneToFour">13%</td>
                <td class="fiveToNine">13%</td>
                <td class="tenToFourteen">13%</td>
                <td class="fifteen">13%</td>
                <td class="adult">13%</td>
                <td> <input type="number" oninput="calculateTotals()" id="anteriorTrunkSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="anteriorTrunkThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="anteriorTrunkFourthDegree" /></td>
                <td><input type="number" readonly id="anteriorTrunkTotal" /></td>
            </tr>
            <tr>
                <td>Posterior Trunk</td>
                <td class="infant">13%</td>
                <td class="oneToFour">13%</td>
                <td class="fiveToNine">13%</td>
                <td class="tenToFourteen">13%</td>
                <td class="fifteen">13%</td>
                <td class="adult">13%</td>
                <td> <input type="number" oninput="calculateTotals()" id="posteriorTrunkSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="posteriorTrunkThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="posteriorTrunkFourthDegree" /></td>
                <td><input type="number" readonly id="posteriorTrunkTotal" /></td>
            </tr>
            <tr>
                <td>Right Buttock</td>
                <td class="infant">2.5%</td>
                <td class="oneToFour">2.5%</td>
                <td class="fiveToNine">2.5%</td>
                <td class="tenToFourteen">2.5%</td>
                <td class="fifteen">2.5%</td>
                <td class="adult">2.5%</td>
                <td> <input type="number" oninput="calculateTotals()" id="rightButtockSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightButtockThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightButtockFourthDegree" /></td>
                <td><input type="number" readonly id="rightButtockTotal" /></td>
            </tr>
            <tr>
                <td>Left Buttock</td>
                <td class="infant">2.5%</td>
                <td class="oneToFour">2.5%</td>
                <td class="fiveToNine">2.5%</td>
                <td class="tenToFourteen">2.5%</td>
                <td class="fifteen">2.5%</td>
                <td class="adult">2.5%</td>
                <td> <input type="number" oninput="calculateTotals()" id="leftButtockSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftButtockThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftButtockFourthDegree" /></td>
                <td><input type="number" readonly id="leftButtockTotal" /></td>
            </tr>
            <tr>
                <td>Genitalia</td>
                <td class="infant">1%</td>
                <td class="oneToFour">1%</td>
                <td class="fiveToNine">1%</td>
                <td class="tenToFourteen">1%</td>
                <td class="fifteen">1%</td>
                <td class="adult">1%</td>
                <td> <input type="number" oninput="calculateTotals()" id="genetaliaSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="genetaliaThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="genetaliaourthDegree" /></td>
                <td><input type="number" readonly id="genetaliaTotal" /></td>
            </tr>
            <tr>
                <td>Right Upper Arm</td>
                <td class="infant">4%</td>
                <td class="oneToFour">4%</td>
                <td class="fiveToNine">4%</td>
                <t class="tenToFourteen" d>4%</td>
                    <td class="fifteen">4%</td>
                    <td class="adult">4%</td>
                    <td> <input type="number" oninput="calculateTotals()" id="rightUpperArmSecondDegree" /></td>
                    <td><input type="number" oninput="calculateTotals()" id="rightUpperArmThirdDegree" /></td>
                    <td><input type="number" oninput="calculateTotals()" id="rightUpperArmFourthDegree" /></td>
                    <td><input type="number" readonly id="rightUpperArmTotal" /></td>
            </tr>
            <tr>
                <td>Left Upper Arm</td>
                <td class="infant">4%</td>
                <td class="oneToFour">4%</td>
                <td class="fiveToNine">4%</td>
                <td class="tenToFourteen">4%</td>
                <td class="fifteen">4%</td>
                <td class="adult">4%</td>
                <td> <input type="number" oninput="calculateTotals()" id="leftUpperArmSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftUpperArmThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftUpperArmFourthDegree" /></td>
                <td><input type="number" readonly id="leftUpperArmTotal" /></td>
            </tr>
            <tr>
                <td>Right Lower Arm</td>
                <td class="infant">3%</td>
                <td class="oneToFour">3%</td>
                <td class="fiveToNine">3%</td>
                <td class="tenToFourteen">3%</td>
                <td class="fifteen">3%</td>
                <td class="adult">3%</td>
                <td> <input type="number" oninput="calculateTotals()" id="rightLowerArmSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightLowerArmThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightLowerArmFourthDegree" /></td>
                <td><input type="number" readonly id="rightLowerArmTotal" /></td>
            </tr>
            <tr>
                <td>Left Lower Arm</td>
                <td class="infant">3%</td>
                <td class="oneToFour">3%</td>
                <td class="fiveToNine">3%</td>
                <td class="tenToFourteen">3%</td>
                <td class="fifteen">3%</td>
                <td class="adult">3%</td>
                <td> <input type="number" oninput="calculateTotals()" id="leftLowerArmSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftLowerArmThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftLowerArmFourthDegree" /></td>
                <td><input type="number" readonly id="leftLowerArmTotal" /></td>
            </tr>
            <tr>
                <td>Right Hand</td>
                <td class="infant">2.5%</td>
                <td class="oneToFour">2.5%</td>
                <td class="fiveToNine">2.5%</td>
                <td class="tenToFourteen">2.5%</td>
                <td class="fifteen">2.5%</td>
                <td class="adult">2.5%</td>
                <td> <input type="number" oninput="calculateTotals()" id="rightHandSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightHandThirdDegree" /></td>
                <td> <input type="number" oninput="calculateTotals()" id="rightHandFourthDegree" /></td>
                <td><input type="number" readonly id="rightHandTotal" /></td>
            </tr>
            <tr>
                <td>Left Hand</td>
                <td class="infant">2.5%</td>
                <td class="oneToFour">2.5%</td>
                <td class="fiveToNine">2.5%</td>
                <td class="tenToFourteen">2.5%</td>
                <td class="fifteen">2.5%</td>
                <td class="adult">2.5%</td>
                <td> <input type="number" oninput="calculateTotals()" id="leftHandSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftHandThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftHandFourthDegree" />
                </td>
                <td><input type="number" readonly id="leftHandTotal" /></td>
            </tr>
            <tr>
                <td>Right Thigh</td>
                <td class="infant">5.5%</td>
                <td class="oneToFour">6.5%</td>
                <td class="fiveToNine">8%</td>
                <td class="tenToFourteen">8.5%</td>
                <td class="fifteen">9%</td>
                <td class="adult">9.5%</td>
                <td> <input type="number" oninput="calculateTotals()" id="rightThighSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightThighThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightThighFourthDegree" /></td>
                <td><input type="number" readonly id="rightThighTotal" /></td>
            </tr>
            <tr>
                <td>Left Thigh</td>
                <td class="infant">5.5%</td>
                <td class="oneToFour">6.5%</td>
                <td class="fiveToNine">8%</td>
                <td class="tenToFourteen">8.5%</td>
                <td class="fifteen">9%</td>
                <td class="adult">9.5%</td>
                <td> <input type="number" oninput="calculateTotals()" id="leftThighSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftThighThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftThighFourthDegree" /></td>
                <td><input type="number" readonly id="leftThighTotal" /></td>
            </tr>
            <tr>
                <td>Right Leg</td>
                <td class="infant">5%</td>
                <td class="oneToFour">5%</td>
                <td class="fiveToNine">5.5%</td>
                <td class="tenToFourteen">6%</td>
                <td class="fifteen">6.5%</td>
                <td class="adult">7%</td>
                <td> <input type="number" oninput="calculateTotals()" id="rightLegSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightLegThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightLegFourthDegree" /></td>
                <td><input type="number" readonly id="rightLegTotal" /></td>
            </tr>
            <tr>
                <td>Left Leg</td>
                <td class="infant">5%</td>
                <td class="oneToFour">5%</td>
                <td class="fiveToNine">5.5%</td>
                <td class="tenToFourteen">6%</td>
                <td class="fifteen">6.5%</td>
                <td class="adult">7%</td>
                <td> <input type="number" oninput="calculateTotals()" id="leftLegSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftLegThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftLegFourthDegree" /></td>
                <td><input type="number" readonly id="leftLegTotal" /></td>
            </tr>
            <tr>
                <td>Right Foot</td>
                <td class="infant">3.5%</td>
                <td class="oneToFour">3.5%</td>
                <td class="fiveToNine">3.5%</td>
                <td class="tenToFourteen">3.5%</td>
                <td class="fifteen">3.5%</td>
                <td class="adult">3.5%</td>
                <td> <input type="number" oninput="calculateTotals()" id="rightFootSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightFootThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="rightFootFourthDegree" /></td>
                <td><input type="number" readonly id="rightFootTotal" /></td>
            </tr>
            <tr>
                <td>Left Foot</td>
                <td class="infant">3.5%</td>
                <td class="oneToFour">3.5%</td>
                <td class="fiveToNine">3.5%</td>
                <td class="tenToFourteen">3.5%</td>
                <td class="fifteen">3.5%</td>
                <td class="adult">3.5%</td>
                <td> <input type="number" oninput="calculateTotals()" id="leftFootSecondDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftFootThirdDegree" /></td>
                <td><input type="number" oninput="calculateTotals()" id="leftFootFourthDegree" /></td>
                <td><input type="number" readonly id="leftFootTotal" /></td>
            </tr>

            <tr>
                <td colspan="2" class="right-align">
                    <h5 style="margin-right:16px">Totals: </h5>
                </td>
                <td><input readonly id="secondTotal" /></td>
                <td><input readonly id="thirdTotal" /></td>
                <td><input readonly id="fourthTotal" /></td>
                <td><input readonly id="grandTotal" /></td>
            </tr>
        </table>
    </div>

    <div class="row">
        <div class="col l6 m6 s12">
            <h6>Completed by: <input type="text" /></h6>
        </div>
        <div class="col l3 m3 s6">
            <h6>Date: <input readonly type="date" id="todayDate" /></h6>
        </div>
        <div class="col l3 m3 s6">
            <h6>Time: <input readonly id="currentTime" type="time" /> </h6>
        </div>
    </div>


</body>
<!-- <script>window.$ = window.jQuery = require('./jquery-3.0.0.min.js');</script> -->

<script>window.$ = window.jQuery = require('jquery');</script>
<script type="text/javascript">

    var useThisRange = 'infant';
    var grandTotal = 0;
    var fourthTotal = 0;
    var thirdTotal = 0;
    var secondTotal = 0;
    var patientSex = null;

    Date.prototype.toDateInputValue = (function () {
        var local = new Date(this);
        return local.toJSON().slice(0, 10);
    });

    Date.prototype.toTimeInputValue = (function () {
        var local = new Date(this);
        return `${local.getHours()}:${local.getMinutes() > 9 ? local.getMinutes() : `0${local.getMinutes()}`}`;
    });

    $(document).ready(function () {
        renderTableCells();
        $('#todayDate').val(new Date().toDateInputValue());
        setTimeForNow();
        initializeCanvas('canvasDiv', 'canvas', 'canvasContainer2');
        setRadios();
        setFormType('burn');
        const args = require('electron').remote.process.argv
        console.log('arguments passed...... ', args);
    });

    function setRadios() {
        var fill = document.getElementById('fill1');
        var tool = document.getElementById('tool1');
        var burn = document.getElementById('burnRadio');
        tool1.click();
        fill1.click();
        burn.click();
    }

    function setTimeForNow() {
        setInterval(() => {
            $('#currentTime').val(new Date().toTimeInputValue());
        }, 1000);
    }

    function initializeCanvas(c, d, e) {

        var canvasDiv = document.getElementById(c);
        canvas = document.createElement('canvas');
        canvas.setAttribute('width', 400);
        canvas.setAttribute('height', 400);
        canvas.setAttribute('id', d);
        canvas.className = e;
        canvasDiv.appendChild(canvas);

        if (typeof G_vmlCanvasManager != 'undefined') {
            canvas = G_vmlCanvasManager.initElement(canvas);
        }

        context = canvas.getContext("2d");
        var ctx = canvas.getContext('2d');
        var last_mousex = last_mousey = 0;
        var mousex = mousey = 0;
        var mousedown = false;

        //Mousedown
        $(`#${c}`).on('mousedown', function (e) {
            var canvasx = $(`#${c}`).offset().left;
            var canvasy = $(`#${c}`).offset().top;
            last_mousex = mousex = parseInt(e.pageX) - parseInt(canvasx);
            last_mousey = mousey = parseInt(e.pageY) - parseInt(canvasy);
            mousedown = true;
        });

        //Mouseup
        $(`#${c}`).on('mouseup', function (e) {
            mousedown = false;
        });


        //Mousemove
        $(`#${c}`).on('mousemove', function (e) {
            var canvasx = $(`#${c}`).offset().left;
            var canvasy = $(`#${c}`).offset().top;
            mousex = parseInt(e.pageX - canvasx);
            mousey = parseInt(e.pageY - canvasy);
            if (mousedown) {
                ctx.beginPath();
                if (tooltype == 'draw') {
                    ctx.globalCompositeOperation = 'source-over';
                    ctx.strokeStyle = canvasFillColor;
                    ctx.lineWidth = 3;
                } else if (tooltype === 'erase') {
                    ctx.globalCompositeOperation = 'destination-out';
                    ctx.lineWidth = 5;
                }
                ctx.moveTo(last_mousex, last_mousey);
                ctx.lineTo(mousex, mousey);
                ctx.lineJoin = ctx.lineCap = 'round';
                ctx.stroke();
            }
            last_mousex = mousex;
            last_mousey = mousey;
        });
    }

    function insertNewAmendedRow() {
        var tr = ` <tr>
                        <td><input type="date" /></td>
                        <td><input type="text" /></td>
                        <td><input type="text" /></td>
                        <td><input type="text" /></td>
                        <td><input type="text" /></td>
                    </tr>`;
        var table = document.getElementById('amendedTable');
        table.innerHTML += tr;
    }

    function setSex(sex) {
        if (sex === 'm') {
            patientSex = 'male';
            var box = document.getElementById('femaleBox');
            box.checked = false;
        } else {
            patientSex = 'female';
            var box = document.getElementById('maleBox');
            box.checked = false;
        }
    }

    function calculateTotals() {

        var tableRows = [
            { name: 'head', infant: 19, oneToFour: 12, fiveToNine: 13, tenToFourteen: 11, fifteen: 8, adult: 7 },
            { name: 'neck', infant: 2, oneToFour: 2, fiveToNine: 2, tenToFourteen: 2, fifteen: 2, adult: 2 },
            { name: 'anteriorTrunk', infant: 13, oneToFour: 13, fiveToNine: 13, tenToFourteen: 13, fifteen: 13, adult: 13 },
            { name: 'posteriorTrunk', infant: 13, oneToFour: 13, fiveToNine: 13, tenToFourteen: 13, fifteen: 13, adult: 13 },
            { name: 'rightButtock', infant: 2.5, oneToFour: 2.5, fiveToNine: 2.5, tenToFourteen: 2.5, fifteen: 2.5, adult: 2.5 },
            { name: 'leftButtock', infant: 2.5, oneToFour: 2.5, fiveToNine: 2.5, tenToFourteen: 2.5, fifteen: 2.5, adult: 2.5 },
            { name: 'genetalia', infant: 1, oneToFour: 1, fiveToNine: 1, tenToFourteen: 1, fifteen: 1, adult: 1 },
            { name: 'rightUpperArm', infant: 4, oneToFour: 4, fiveToNine: 4, tenToFourteen: 4, fifteen: 4, adult: 4 },
            { name: 'leftUpperArm', infant: 4, oneToFour: 4, fiveToNine: 4, tenToFourteen: 4, fifteen: 4, adult: 4 },
            { name: 'rightLowerArm', infant: 3, oneToFour: 3, fiveToNine: 3, tenToFourteen: 3, fifteen: 3, adult: 3 },
            { name: 'leftLowerArm', infant: 3, oneToFour: 3, fiveToNine: 3, tenToFourteen: 3, fifteen: 3, adult: 3 },
            { name: 'rightHand', infant: 2.5, oneToFour: 2.5, fiveToNine: 2.5, tenToFourteen: 2.5, fifteen: 2.5, adult: 2.5 },
            { name: 'leftHand', infant: 2.5, oneToFour: 2.5, fiveToNine: 2.5, tenToFourteen: 2.5, fifteen: 2.5, adult: 2.5 },
            { name: 'rightThigh', infant: 5.5, oneToFour: 6.5, fiveToNine: 8, tenToFourteen: 8.5, fifteen: 9, adult: 9.5 },
            { name: 'leftThigh', infant: 5.5, oneToFour: 6.5, fiveToNine: 8, tenToFourteen: 8.5, fifteen: 9, adult: 9.5 },
            { name: 'rightLeg', infant: 5, oneToFour: 5, fiveToNine: 5.5, tenToFourteen: 6, fifteen: 6.5, adult: 7 },
            { name: 'leftLeg', infant: 5, oneToFour: 5, fiveToNine: 5.5, tenToFourteen: 6, fifteen: 6.5, adult: 7 },
            { name: 'rightFoot', infant: 3.5, oneToFour: 3.5, fiveToNine: 3.5, tenToFourteen: 3.5, fifteen: 3.5, adult: 3.5 },
            { name: 'leftFoot', infant: 3.5, oneToFour: 3.5, fiveToNine: 3.5, tenToFourteen: 3.5, fifteen: 3.5, adult: 3.5 }
        ];

        grandTotal = 0;
        secondTotal = 0;
        thirdTotal = 0;
        fourthTotal = 0;

        for (var i = 0; i < tableRows.length; i++) {
            renderCalculation(tableRows[i]);
        }

    }

    function renderCalculation(row) {
        var second = $(`#${row.name}SecondDegree`).val();
        var third = $(`#${row.name}ThirdDegree`).val();
        var fourth = $(`#${row.name}FourthDegree`).val();
        var rowTotal = parseFloat(second ? second : 0) + parseFloat(third ? third : 0) + parseFloat(fourth ? fourth : 0);
        var maxAllowed = row[useThisRange];
        var totalBox = document.getElementById(`${row.name}Total`);
        $(`#${row.name}Total`).val(rowTotal > 0 ? rowTotal : null);
        grandTotal += rowTotal;
        $('#grandTotal').val(grandTotal > 0 ? grandTotal : null);
        secondTotal += parseFloat(second ? second : 0);
        $('#secondTotal').val(secondTotal);
        thirdTotal += parseFloat(third ? third : 0);
        $('#thirdTotal').val(thirdTotal > 0 ? thirdTotal : null);
        fourthTotal += parseFloat(fourth ? fourth : 0);
        $('#fourthTotal').val(fourthTotal > 0 ? fourthTotal : null);
        if (rowTotal > maxAllowed) {
            totalBox.style.background = 'red';
            totalBox.style.color = 'white';
        } else {
            totalBox.style.color = 'black';
            totalBox.style.background = 'white';
        }
    }

    function renderTableCells() {
        patientAge = $('#patientAge').val();

        var infant = document.getElementsByClassName('infant');
        var oneToFour = document.getElementsByClassName('oneToFour');
        var fiveToNine = document.getElementsByClassName('fiveToNine');
        var tenToFourteen = document.getElementsByClassName('tenToFourteen');
        var fifteen = document.getElementsByClassName('fifteen');
        var adult = document.getElementsByClassName('adult');
        if (patientAge < 1) {
            alterTableDisplay(infant, false);
            alterTableDisplay(oneToFour, true);
            alterTableDisplay(fiveToNine, true);
            alterTableDisplay(tenToFourteen, true);
            alterTableDisplay(fifteen, true);
            alterTableDisplay(adult, true);
            useThisRange = 'infant';
            $('#canvas').removeClass('canvasContainer1');
            $('#canvas').addClass('canvasContainer2');
        } else if (patientAge >= 1 && patientAge < 5) {
            alterTableDisplay(infant, true);
            alterTableDisplay(oneToFour, false);
            alterTableDisplay(fiveToNine, true);
            alterTableDisplay(tenToFourteen, true);
            alterTableDisplay(fifteen, true);
            alterTableDisplay(adult, true);
            useThisRange = 'oneToFour';
            $('#canvas').removeClass('canvasContainer2');
            $('#canvas').addClass('canvasContainer1');
        } else if (patientAge >= 5 && patientAge < 10) {
            alterTableDisplay(infant, true);
            alterTableDisplay(oneToFour, true);
            alterTableDisplay(fiveToNine, false);
            alterTableDisplay(tenToFourteen, true);
            alterTableDisplay(fifteen, true);
            alterTableDisplay(adult, true);
            useThisRange = 'fiveToNine';
            $('#canvas').removeClass('canvasContainer2');
            $('#canvas').addClass('canvasContainer1');
        } else if (patientAge >= 10 && patientAge < 15) {
            alterTableDisplay(infant, true);
            alterTableDisplay(oneToFour, true);
            alterTableDisplay(fiveToNine, true);
            alterTableDisplay(tenToFourteen, false);
            alterTableDisplay(fifteen, true);
            alterTableDisplay(adult, true);
            $('#canvas').removeClass('canvasContainer2');
            useThisRange = 'tenToFourteen';
            $('#canvas').addClass('canvasContainer1');
        } else if (patientAge === 15) {
            alterTableDisplay(infant, true);
            alterTableDisplay(oneToFour, true);
            alterTableDisplay(fiveToNine, true);
            alterTableDisplay(tenToFourteen, true);
            alterTableDisplay(fifteen, false);
            alterTableDisplay(adult, true);
            $('#canvas').removeClass('canvasContainer2');
            useThisRange = 'fifteen';
            $('#canvas').addClass('canvasContainer1');
        } else if (patientAge > 15) {
            alterTableDisplay(infant, true);
            alterTableDisplay(oneToFour, true);
            alterTableDisplay(fiveToNine, true);
            alterTableDisplay(tenToFourteen, true);
            alterTableDisplay(fifteen, true);
            alterTableDisplay(adult, false);
            $('#canvas').removeClass('canvasContainer2');
            useThisRange = 'adult';
            $('#canvas').addClass('canvasContainer1');
        }
    }

    function alterTableDisplay(arr, hide) {
        for (var i = 0; i < arr.length; i++) {
            arr[i].style.display = hide ? 'none' : 'table-cell';
        }
    }

</script>

</html>